function AddEvent(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent("on"+t,o)}function GetXmlHttpRequest(){var e;if(window.XMLHttpRequest)return e=new XMLHttpRequest;if(!window.ActiveXObject)return alert("Votre navigateur ne supporte pas l'objet XMLHttpRequest"),e=!1;var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(var o in t)try{return e=new ActiveXObject(t[o])}catch(n){}}var JSON=JSON||{};if(JSON.parse=JSON.parse||function(str){return""===str&&(str='""'),eval("var p ="+str+";"),p},"function"!=typeof document.getElementsByClassName&&(document.getElementsByClassName=function(){var e=document.getElementsByTagName("*"),t=new Array;for(i=0;i<e.length;i++)if(e[i].getAttribute("class"))for(ecl=e[i].getAttribute("class").split(" "),j=0;j<ecl.length;j++)ecl[j].toLowerCase()==arguments[0].toLowerCase()&&t.push(e[i]);else if(e[i].className)for(ecl=e[i].className.split(" "),j=0;j<ecl.length;j++)ecl[j].toLowerCase()==arguments[0].toLowerCase()&&t.push(e[i]);return t}),"undefined"==typeof Completer)var Completer={ConfigPath:"php/configurer.php",PHPPath:"php/completer.php",Properties:[],Suggestions:[],Pointer:-1,PreviousValue:"",Focused:null,Input:null,Result:null,Response:{},Init:function(){Completer.SetProperties();var e=document.createElement("div");e.id="result",e.className="form--lightsearch__result",this.Result=e;var t=document.getElementById("searcher");t.appendChild(e),this.Input=document.getElementById("autocomplete"),this.EventHandlers.KeyboardNavigation(),this.EventHandlers.HideResults(this.Result)},EventHandlers:{KeyboardNavigation:function(){AddEvent(Completer.Input,"keyup",function(e){e=e||window.event;var t=e.keyCode;38===t||40===t?Completer.Navigation(t):13===t?Completer.InsertSuggestion():Completer.Input.value!==Completer.PreviousValue&&Completer.DisplaySuggestions()})},HideResults:function(e){AddEvent(document.body,"click",function(){e.style.display="none"})},ClickableSuggestion:function(e){if(Completer.Suggestions=document.getElementsByClassName(e),"undefined"!=typeof Completer.Suggestions){var t=Completer.Suggestions.length;if(0!==t&&null!==t)for(var o=0;t>o;o++)AddEvent(Completer.Suggestions[o],"click",function(e){return function(){Completer.Focused=Completer.Suggestions[e],Completer.InsertSuggestion()}}(o))}}},SetProperties:function(){var e=GetXmlHttpRequest();e.open("GET",Completer.ConfigPath,!0),e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){var t=e.responseText;Completer.Properties=t.split(", ")}},e.send(null)},Navigation:function(e){Completer.Pointer>=-1&&Completer.Pointer<=Completer.Suggestions.length-1&&(-1===Completer.Pointer?40===e&&Completer.SetFocus(e):Completer.Pointer===Completer.Suggestions.length-1?38===e&&Completer.SetFocus(e):Completer.SetFocus(e))},DisplaySuggestions:function(){Completer.Result.style.display="block",Completer.Pointer=-1;var e="",t=GetXmlHttpRequest();t.open("POST",Completer.PHPPath,!0),t.setRequestHeader("content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var o=JSON.parse(t.responseText);if(null!==o){Completer.Response=o;for(var n=Completer.Properties.length,s=o.length,r=0;s>r;r++)if("undefined"!=typeof o[r]){var l;l=r+1===s?"last":"",e+='<div id="'+r+'" class="item--result '+l+'">\n';for(var i=0;n>i;i++)e+='<span class="data-'+i+'">'+o[r][i]+"</span>\n";e+="</div>\n"}}else e='<div class="item--result">Not found</div>'}else 4===t.readyState&&200!==t.status&&(e='<div class="item--result">Error</div>');Completer.Result.innerHTML=e,Completer.EventHandlers.ClickableSuggestion("item--result")},t.send("requestExpression="+Completer.Input.value)},InsertSuggestion:function(){var e;e=null!==Completer.Focused?Completer.Focused.id:0,Completer.Input.value=Completer.Response[e][0],Completer.Pointer=-1,Completer.Result.style.display="none"},SetFocus:function(e){40===e?(-1!==this.Pointer&&Completer.RemoveFocus(),Completer.Pointer++,Completer.GetFocus()):38===e&&(Completer.RemoveFocus(),Completer.Pointer--,-1!==Completer.Pointer&&Completer.GetFocus())},GetFocus:function(){Completer.Focused=Completer.Suggestions[Completer.Pointer],Completer.Suggestions[Completer.Pointer].className+=" focus"},RemoveFocus:function(){Completer.Focused=null,Completer.Suggestions[Completer.Pointer].className="item--result"}};else console.log("This namespace already exists !");Completer.Init();